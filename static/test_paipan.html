<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ’ç›˜ç•Œé¢æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        .test-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-link {
            display: block;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            transition: transform 0.2s;
        }
        .test-link:hover {
            transform: translateY(-2px);
        }
        .test-link.special {
            background: linear-gradient(135deg, #d4af37, #ffd700);
            color: #000;
        }
        .features {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .features h3 {
            color: #333;
            margin-bottom: 15px;
        }
        .features ul {
            list-style-type: none;
            padding: 0;
        }
        .features li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .features li:before {
            content: "âœ… ";
            margin-right: 10px;
        }
        .iframe-container {
            margin-top: 30px;
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        .iframe-container iframe {
            width: 100%;
            height: 800px;
            border: none;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online {
            background: #28a745;
            box-shadow: 0 0 10px rgba(40, 167, 69, 0.5);
        }
        .status-offline {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”® å…«å­—æ’ç›˜ç•Œé¢æµ‹è¯•</h1>
        
        <div id="server-status" style="text-align: center; margin-bottom: 20px;">
            <span id="status-indicator" class="status-indicator status-offline"></span>
            <span id="status-text">æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€ä¸­...</span>
        </div>

        <div class="test-links">
            <a href="http://localhost:8080/" class="test-link">
                ğŸ  ä¸»é¡µ
            </a>
            <a href="http://localhost:8080/paipan" class="test-link special" target="_blank">
                ğŸ” æ’ç›˜é¡µé¢ï¼ˆæ–°çª—å£ï¼‰
            </a>
            <a href="http://localhost:8080/paipan?name=æµ‹è¯•ç”¨æˆ·&birthDate=1990-03-15&birthTime=14:30" class="test-link special" target="_blank">
                ğŸ“‹ ç¤ºä¾‹æ’ç›˜ï¼ˆæ–°çª—å£ï¼‰
            </a>
            <a href="#" onclick="loadInFrame()" class="test-link">
                ğŸ“º åœ¨æ¡†æ¶ä¸­åŠ è½½æ’ç›˜
            </a>
        </div>

        <div class="features">
            <h3>ğŸ¨ ç•Œé¢ç‰¹è‰²åŠŸèƒ½</h3>
            <ul>
                <li>ç°ä»£åŒ–æ·±è‰²ä¸»é¢˜è®¾è®¡ï¼Œé‡‘è‰²ç‚¹ç¼€æ•ˆæœ</li>
                <li>åœ†å½¢äº”è¡Œå…ƒç´ å±•ç¤ºï¼Œç›´è§‚çš„é¢œè‰²ç¼–ç </li>
                <li>å®Œæ•´çš„å…«å­—ä¿¡æ¯ï¼šä¸»æ˜Ÿã€è—å¹²ã€å‰¯æ˜Ÿã€çº³éŸ³ã€æ˜Ÿè¿ã€è‡ªåã€ç©ºäº¡ã€ç¥ç…</li>
                <li>å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯</li>
                <li>åŠ¨ç”»æ•ˆæœå’Œäº¤äº’ä½“éªŒ</li>
                <li>ä¸“ä¸šæ’ç›˜å¸ƒå±€ï¼Œå‚è€ƒç°ä»£å…«å­—APPè®¾è®¡</li>
            </ul>
        </div>

        <div class="features">
            <h3>ğŸ”§ æŠ€æœ¯æ£€æŸ¥</h3>
            <ul>
                <li id="css-check">CSSæ ·å¼åŠ è½½: <span style="color: orange;">æ£€æŸ¥ä¸­...</span></li>
                <li id="js-check">JavaScriptåŠŸèƒ½: <span style="color: orange;">æ£€æŸ¥ä¸­...</span></li>
                <li id="api-check">APIæ¥å£: <span style="color: orange;">æ£€æŸ¥ä¸­...</span></li>
                <li id="responsive-check">å“åº”å¼è®¾è®¡: <span style="color: green;">âœ“ å·²æ”¯æŒ</span></li>
            </ul>
        </div>

        <div id="iframe-section" class="iframe-container" style="display: none;">
            <iframe id="paipan-frame" src=""></iframe>
        </div>
    </div>

    <script>
        // æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
        async function checkServerStatus() {
            try {
                const response = await fetch('http://localhost:8080/health');
                const data = await response.json();
                
                document.getElementById('status-indicator').className = 'status-indicator status-online';
                document.getElementById('status-text').textContent = 'æœåŠ¡å™¨åœ¨çº¿ âœ…';
                
                // ç»§ç»­æ£€æŸ¥å…¶ä»–èµ„æº
                checkResources();
                
            } catch (error) {
                document.getElementById('status-indicator').className = 'status-indicator status-offline';
                document.getElementById('status-text').textContent = 'æœåŠ¡å™¨ç¦»çº¿ âŒ';
            }
        }

        // æ£€æŸ¥èµ„æºåŠ è½½
        async function checkResources() {
            // æ£€æŸ¥CSS
            try {
                const cssResponse = await fetch('http://localhost:8080/static/paipan.css');
                if (cssResponse.ok) {
                    document.getElementById('css-check').innerHTML = 'CSSæ ·å¼åŠ è½½: <span style="color: green;">âœ“ æ­£å¸¸</span>';
                } else {
                    document.getElementById('css-check').innerHTML = 'CSSæ ·å¼åŠ è½½: <span style="color: red;">âœ— å¤±è´¥</span>';
                }
            } catch (error) {
                document.getElementById('css-check').innerHTML = 'CSSæ ·å¼åŠ è½½: <span style="color: red;">âœ— é”™è¯¯</span>';
            }

            // æ£€æŸ¥JS
            try {
                const jsResponse = await fetch('http://localhost:8080/static/paipan.js');
                if (jsResponse.ok) {
                    document.getElementById('js-check').innerHTML = 'JavaScriptåŠŸèƒ½: <span style="color: green;">âœ“ æ­£å¸¸</span>';
                } else {
                    document.getElementById('js-check').innerHTML = 'JavaScriptåŠŸèƒ½: <span style="color: red;">âœ— å¤±è´¥</span>';
                }
            } catch (error) {
                document.getElementById('js-check').innerHTML = 'JavaScriptåŠŸèƒ½: <span style="color: red;">âœ— é”™è¯¯</span>';
            }

            // æ£€æŸ¥API
            try {
                const apiResponse = await fetch('http://localhost:8080/api/bazi', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: 'æµ‹è¯•',
                        birthDate: '1990-01-01',
                        birthTime: '12:00'
                    })
                });
                if (apiResponse.ok) {
                    document.getElementById('api-check').innerHTML = 'APIæ¥å£: <span style="color: green;">âœ“ æ­£å¸¸</span>';
                } else {
                    document.getElementById('api-check').innerHTML = 'APIæ¥å£: <span style="color: red;">âœ— å¤±è´¥</span>';
                }
            } catch (error) {
                document.getElementById('api-check').innerHTML = 'APIæ¥å£: <span style="color: red;">âœ— é”™è¯¯</span>';
            }
        }

        // åœ¨æ¡†æ¶ä¸­åŠ è½½æ’ç›˜é¡µé¢
        function loadInFrame() {
            const iframe = document.getElementById('paipan-frame');
            const container = document.getElementById('iframe-section');
            
            iframe.src = 'http://localhost:8080/paipan?name=æ¡†æ¶æµ‹è¯•&birthDate=1995-08-12&birthTime=20:00';
            container.style.display = 'block';
            
            // æ»šåŠ¨åˆ°iframeä½ç½®
            container.scrollIntoView({ behavior: 'smooth' });
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        document.addEventListener('DOMContentLoaded', function() {
            checkServerStatus();
        });

        // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡æœåŠ¡å™¨çŠ¶æ€
        setInterval(checkServerStatus, 30000);
    </script>
</body>
</html>