<!DOCTYPE html>
<html>
<head>
    <title>æ’ç›˜è°ƒè¯•é¡µé¢</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .debug-container { background: white; padding: 20px; border-radius: 10px; }
        .test-btn { 
            display: inline-block; 
            padding: 10px 20px; 
            margin: 10px; 
            background: #007bff; 
            color: white; 
            text-decoration: none; 
            border-radius: 5px; 
            border: none; 
            cursor: pointer; 
        }
        .test-btn:hover { background: #0056b3; }
        .test-btn.success { background: #28a745; }
        .test-btn.danger { background: #dc3545; }
        .result { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; }
        pre { background: #e9ecef; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>ğŸ”§ å…«å­—æ’ç›˜è°ƒè¯•å·¥å…·</h1>
        
        <h3>å¿«é€Ÿæµ‹è¯•</h3>
        <button class="test-btn" onclick="testHealth()">æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€</button>
        <button class="test-btn" onclick="testAPI()">æµ‹è¯•å…«å­—API</button>
        <button class="test-btn" onclick="testCSS()">æµ‹è¯•CSSåŠ è½½</button>
        <button class="test-btn" onclick="testJS()">æµ‹è¯•JSåŠ è½½</button>
        <button class="test-btn" onclick="openPaipan()">æ‰“å¼€æ’ç›˜é¡µé¢</button>
        
        <div id="results" class="result" style="display:none;">
            <h4>æµ‹è¯•ç»“æœ:</h4>
            <pre id="output"></pre>
        </div>
        
        <h3>é—®é¢˜æ’æŸ¥</h3>
        <ul>
            <li><strong>CSSåŠ è½½é—®é¢˜</strong>: æ£€æŸ¥ /static/paipan.css æ˜¯å¦å¯è®¿é—®</li>
            <li><strong>JSåŠ è½½é—®é¢˜</strong>: æ£€æŸ¥ /static/paipan.js æ˜¯å¦å¯è®¿é—®</li>
            <li><strong>APIé—®é¢˜</strong>: æ£€æŸ¥ /api/bazi æ¥å£æ˜¯å¦æ­£å¸¸</li>
            <li><strong>è·¯ç”±é—®é¢˜</strong>: æ£€æŸ¥ /paipan è·¯ç”±æ˜¯å¦é…ç½®æ­£ç¡®</li>
        </ul>
        
        <h3>ä¿®å¤çŠ¶æ€</h3>
        <ul>
            <li>âœ… <strong>CSS/JSè·¯å¾„ä¿®å¤</strong>: å·²å°†ç›¸å¯¹è·¯å¾„æ”¹ä¸ºç»å¯¹è·¯å¾„</li>
            <li>âœ… <strong>åŠ è½½æŒ‡ç¤ºå™¨</strong>: æ·»åŠ äº†åŠ è½½åŠ¨ç”»å’Œéšè—é€»è¾‘</li>
            <li>âœ… <strong>é”™è¯¯å¤„ç†</strong>: æ·»åŠ äº†è¯¦ç»†çš„æ—¥å¿—å’Œé”™è¯¯å¤„ç†</li>
            <li>âœ… <strong>è°ƒè¯•ä¿¡æ¯</strong>: æ·»åŠ äº†console.logç”¨äºè°ƒè¯•</li>
        </ul>
        
        <h3>ç›´æ¥é“¾æ¥</h3>
        <a href="http://localhost:8080/" target="_blank" class="test-btn">ä¸»é¡µ</a>
        <a href="http://localhost:8080/paipan" target="_blank" class="test-btn">æ’ç›˜é¡µé¢</a>
        <a href="http://localhost:8080/paipan?name=æµ‹è¯•&birthDate=1990-03-15&birthTime=14:30" target="_blank" class="test-btn">ç¤ºä¾‹æ’ç›˜</a>
        <a href="http://localhost:8080/static/test_paipan.html" target="_blank" class="test-btn">æµ‹è¯•é¡µé¢</a>
    </div>

    <script>
        function showResult(title, content, type = 'info') {
            const results = document.getElementById('results');
            const output = document.getElementById('output');
            
            results.style.display = 'block';
            output.innerHTML = `[${new Date().toLocaleTimeString()}] ${title}\n${content}`;
            
            results.style.borderLeft = type === 'success' ? '4px solid #28a745' : 
                                     type === 'error' ? '4px solid #dc3545' : '4px solid #007bff';
        }

        async function testHealth() {
            try {
                const response = await fetch('http://localhost:8080/health');
                if (response.ok) {
                    const data = await response.json();
                    showResult('âœ… æœåŠ¡å™¨çŠ¶æ€æ­£å¸¸', JSON.stringify(data, null, 2), 'success');
                } else {
                    showResult('âŒ æœåŠ¡å™¨çŠ¶æ€å¼‚å¸¸', `HTTP ${response.status}: ${response.statusText}`, 'error');
                }
            } catch (error) {
                showResult('âŒ æ— æ³•è¿æ¥æœåŠ¡å™¨', error.message, 'error');
            }
        }

        async function testAPI() {
            try {
                const response = await fetch('http://localhost:8080/api/bazi', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name: 'æµ‹è¯•ç”¨æˆ·',
                        birthDate: '1990-03-15',
                        birthTime: '14:30'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    showResult('âœ… å…«å­—APIæ­£å¸¸', `åå­—: ${data.name}\nå…«å­—æŸ±æ•°: ${data.bazi.length}\nä¸»æ˜Ÿç¤ºä¾‹: ${data.bazi[0].zhuXing}`, 'success');
                } else {
                    showResult('âŒ å…«å­—APIå¼‚å¸¸', `HTTP ${response.status}: ${response.statusText}`, 'error');
                }
            } catch (error) {
                showResult('âŒ APIè°ƒç”¨å¤±è´¥', error.message, 'error');
            }
        }

        async function testCSS() {
            try {
                const response = await fetch('http://localhost:8080/static/paipan.css');
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    showResult('âœ… CSSæ–‡ä»¶æ­£å¸¸', `æ–‡ä»¶å¤§å°: ${size} å­—èŠ‚\nContent-Type: ${response.headers.get('content-type')}`, 'success');
                } else {
                    showResult('âŒ CSSæ–‡ä»¶å¼‚å¸¸', `HTTP ${response.status}: ${response.statusText}`, 'error');
                }
            } catch (error) {
                showResult('âŒ CSSåŠ è½½å¤±è´¥', error.message, 'error');
            }
        }

        async function testJS() {
            try {
                const response = await fetch('http://localhost:8080/static/paipan.js');
                if (response.ok) {
                    const size = response.headers.get('content-length');
                    showResult('âœ… JSæ–‡ä»¶æ­£å¸¸', `æ–‡ä»¶å¤§å°: ${size} å­—èŠ‚\nContent-Type: ${response.headers.get('content-type')}`, 'success');
                } else {
                    showResult('âŒ JSæ–‡ä»¶å¼‚å¸¸', `HTTP ${response.status}: ${response.statusText}`, 'error');
                }
            } catch (error) {
                showResult('âŒ JSåŠ è½½å¤±è´¥', error.message, 'error');
            }
        }

        function openPaipan() {
            window.open('http://localhost:8080/paipan?name=è°ƒè¯•æµ‹è¯•&birthDate=1995-08-12&birthTime=20:00', '_blank');
            showResult('ğŸš€ æ’ç›˜é¡µé¢å·²æ‰“å¼€', 'è¯·æ£€æŸ¥æ–°çª—å£ä¸­çš„æ’ç›˜é¡µé¢æ˜¯å¦æ­£å¸¸æ˜¾ç¤º', 'info');
        }

        // è‡ªåŠ¨æ‰§è¡ŒåŸºç¡€æ£€æŸ¥
        window.onload = function() {
            testHealth();
        };
    </script>
</body>
</html>