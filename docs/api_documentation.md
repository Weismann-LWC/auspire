# Auspire API æ–‡æ¡£

## ğŸ“¡ æ¥å£æ¦‚è§ˆ

Auspire æä¾› RESTful API æ¥å£ï¼Œæ”¯æŒ JSON æ ¼å¼çš„æ•°æ®äº¤æ¢ã€‚

### åŸºç¡€URL

```
http://localhost:8080/api
```

### è®¤è¯æ–¹å¼

- **å…¬å…±æ¥å£**: æ— éœ€è®¤è¯ï¼Œå¯ç›´æ¥è®¿é—®
- **ä¿æŠ¤æ¥å£**: éœ€è¦ JWT Token è®¤è¯

### å“åº”æ ¼å¼

æ‰€æœ‰æ¥å£å‡è¿”å› JSON æ ¼å¼æ•°æ®ï¼š

```json
{
  "status": "success|error",
  "data": {},
  "message": "optional message"
}
```

## ğŸ” è®¤è¯æ¥å£

### ç”¨æˆ·æ³¨å†Œ

```http
POST /api/register
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| email | string | æ˜¯ | é‚®ç®±åœ°å€ |
| password | string | æ˜¯ | å¯†ç (æœ€å°‘6ä½) |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "username": "zhangsan",
  "email": "zhangsan@example.com",
  "password": "password123"
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "1234567890",
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "created_at": "2023-01-01T00:00:00Z"
  }
}
```

### ç”¨æˆ·ç™»å½•

```http
POST /api/login
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| username | string | æ˜¯ | ç”¨æˆ·å |
| password | string | æ˜¯ | å¯†ç  |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "username": "zhangsan",
  "password": "password123"
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "1234567890",
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "created_at": "2023-01-01T00:00:00Z"
  }
}
```

### è·å–ç”¨æˆ·èµ„æ–™

```http
GET /api/profile
Authorization: Bearer <token>
```

**å“åº”ç¤ºä¾‹**

```json
{
  "id": "1234567890",
  "username": "zhangsan",
  "email": "zhangsan@example.com",
  "created_at": "2023-01-01T00:00:00Z"
}
```

## ğŸ”® å…«å­—è®¡ç®—æ¥å£

### åŸºç¡€å…«å­—è®¡ç®—

```http
POST /api/bazi
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| name | string | æ˜¯ | å§“å |
| birthDate | string | æ˜¯ | å‡ºç”Ÿæ—¥æœŸ(YYYY-MM-DD) |
| birthTime | string | æ˜¯ | å‡ºç”Ÿæ—¶é—´(HH:MM) |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "birthDate": "1990-03-15",
  "birthTime": "14:30"
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "bazi": [
    {
      "gan": "åºš",
      "zhi": "åˆ",
      "ganWuXing": "é‡‘",
      "zhiWuXing": "ç«",
      "zhuXing": "æ¯”è‚©",
      "cangGan": ["ä¸", "å·±"],
      "fuXing": ["ä¼¤å®˜", "æ­£å°"],
      "naYin": "è·¯æ—åœŸ",
      "xingYun": "æ­»",
      "ziZuo": "ç—…",
      "kongWang": false,
      "shenSha": {
        "å¤©ä¹™è´µäºº": "é…‰"
      }
    },
    {
      "gan": "å·±",
      "zhi": "é…‰",
      "ganWuXing": "åœŸ",
      "zhiWuXing": "é‡‘",
      "zhuXing": "åŠ«è´¢",
      "cangGan": ["è¾›"],
      "fuXing": ["æ¯”è‚©"],
      "naYin": "å¤§é©¿åœŸ",
      "xingYun": "å¢“",
      "ziZuo": "å¸æ—º",
      "kongWang": false,
      "shenSha": {
        "å°†æ˜Ÿ": "é…‰"
      }
    },
    {
      "gan": "ä¹™",
      "zhi": "ä¸‘",
      "ganWuXing": "æœ¨",
      "zhiWuXing": "åœŸ",
      "zhuXing": "æ—¥ä¸»",
      "cangGan": ["å·±", "ç™¸", "è¾›"],
      "fuXing": ["æ­£å°", "åå°", "æ¯”è‚©"],
      "naYin": "æµ·ä¸­é‡‘",
      "xingYun": "å…»",
      "ziZuo": "è¡°",
      "kongWang": true,
      "shenSha": {
        "åç›–": "ä¸‘"
      }
    },
    {
      "gan": "ç™¸",
      "zhi": "é…‰",
      "ganWuXing": "æ°´",
      "zhiWuXing": "é‡‘",
      "zhuXing": "åå°",
      "cangGan": ["è¾›"],
      "fuXing": ["æ¯”è‚©"],
      "naYin": "å‰‘é”‹é‡‘",
      "xingYun": "é•¿ç”Ÿ",
      "ziZuo": "ä¸´å®˜",
      "kongWang": false,
      "shenSha": {
        "æ–‡æ˜Œè´µäºº": "é…‰"
      }
    }
  ],
  "shiErChangSheng": {
    "å¹´æ”¯": "æ­»",
    "æœˆæ”¯": "å¢“",
    "æ—¥æ”¯": "å…»",
    "æ—¶æ”¯": "é•¿ç”Ÿ"
  }
}
```

### å–œç”¨ç¥è®¡ç®—

```http
POST /api/xiyongshen
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| name | string | æ˜¯ | å§“å |
| bazi | array | æ˜¯ | å…«å­—å››æŸ±æ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "bazi": [
    // ... åŒåŸºç¡€å…«å­—è®¡ç®—å“åº”ä¸­çš„ bazi æ•°ç»„
  ]
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "riZhu": "ä¹™",
  "riZhuStrength": "èº«å¼±",
  "wuXingScores": {
    "æœ¨": 2,
    "ç«": 1,
    "åœŸ": 3,
    "é‡‘": 2,
    "æ°´": 1
  },
  "xiYongShen": "æ°´ã€æœ¨",
  "logic": [
    "å¼€å§‹åˆ†æå–œç”¨ç¥...",
    "1. ç¡®å®šæ—¥ä¸»ä¸º: ä¹™, äº”è¡Œå±: æœ¨",
    "2. åˆ†ææ—¥ä¸»å¼ºå¼±: æ—¥ä¸»èº«å¼±",
    "3. æ—¥ä¸»èº«å¼±ï¼Œéœ€è¦å¯»æ‰¾èƒ½å¤Ÿç”Ÿæ‰¶æ—¥ä¸»äº”è¡Œçš„å…ƒç´ ",
    "4. ç”Ÿæ‰¶æ—¥ä¸»æœ¨äº”è¡Œçš„æ˜¯: æ°´ï¼ˆå°æ˜Ÿï¼‰",
    "5. æ¯”åŠ©æ—¥ä¸»æœ¨äº”è¡Œçš„æ˜¯: æœ¨ï¼ˆæ¯”åŠ«ï¼‰",
    "6. ç»¼åˆåˆ†æï¼Œç¡®å®šå–œç”¨ç¥ä¸º: æ°´ã€æœ¨"
  ]
}
```

### å››æŸ±å…«å­—ç»¼åˆåˆ†æ

```http
POST /api/baziyuce
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| name | string | æ˜¯ | å§“å |
| bazi | array | æ˜¯ | å…«å­—å››æŸ±æ•°ç»„ |

**è¯·æ±‚ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "bazi": [
    // ... åŒåŸºç¡€å…«å­—è®¡ç®—å“åº”ä¸­çš„ bazi æ•°ç»„
  ]
}
```

**å“åº”ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "steps": [
    {
      "title": "ç¬¬ä¸€æ­¥ï¼šæ’ç›˜ä¸å®šç›˜",
      "content": [
        "åšä»€ä¹ˆï¼šå°†å‡ºç”Ÿæ—¶é—´è½¬æ¢ä¸ºå¤©å¹²åœ°æ”¯è¡¨ç¤ºçš„å››æŸ±å…«å­—ï¼Œå¹¶ç¡®è®¤å…¶å‡†ç¡®æ€§ã€‚",
        "æ€ä¹ˆåšï¼š",
        "1. æ’å››æŸ±ï¼šä½¿ç”¨ä¸“ä¸šæ’ç›˜è½¯ä»¶æˆ–æƒå¨ä¸‡å¹´å†ï¼Œè¾“å…¥å…¬å†å‡ºç”Ÿå¹´ã€æœˆã€æ—¥ã€æ—¶ã€‚",
        "..."
      ]
    },
    {
      "title": "ç¬¬äºŒæ­¥ï¼šå®šæ—ºè¡°ï¼Œè¯†ä½“æ€§",
      "content": [
        "åšä»€ä¹ˆï¼šåˆ¤æ–­æ—¥ä¸»åœ¨æ•´ä¸ªå…«å­—ä¸­çš„èƒ½é‡çŠ¶æ€ï¼ˆèº«å¼º/èº«å¼±ï¼‰ï¼Œè¿™æ˜¯é€‰æ‹©å–œç”¨ç¥çš„æ ¹æœ¬ä¾æ®ã€‚",
        "æ‚¨çš„æ—¥ä¸»ä¸º: ä¹™, åœ°æ”¯ä¸º: ä¸‘",
        "æ€ä¹ˆåšï¼šä»å››ä¸ªç»´åº¦ç»¼åˆè¯„ä¼°ï¼ˆæƒé‡ï¼šå¾—ä»¤ > å¾—åœ° > å¾—åŠ¿/å¾—åŠ©ï¼‰ã€‚",
        "..."
      ]
    }
  ]
}
```

### è¿åŠ¿åˆ†æ

```http
POST /api/fortune
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| name | string | æ˜¯ | å§“å |
| bazi | array | æ˜¯ | å…«å­—å››æŸ±æ•°ç»„ |
| birthDate | string | æ˜¯ | å‡ºç”Ÿæ—¥æœŸ |

**å“åº”ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "currentYear": "2023",
  "overallFortune": "æ•´ä½“è¿åŠ¿å¹³ç¨³ï¼Œéœ€è¦æ³¨æ„èº«ä½“å¥åº·ã€‚",
  "career": "äº‹ä¸šå‘å±•ç¨³å®šï¼Œä½†ç¼ºä¹çªç ´æ€§è¿›å±•ã€‚",
  "wealth": "è´¢è¿ä¸€èˆ¬ï¼Œä¸å®œè¿›è¡Œé«˜é£é™©æŠ•èµ„ã€‚",
  "health": "æ³¨æ„è„¾èƒƒæ¶ˆåŒ–ç³»ç»Ÿï¼Œé¿å…æš´é¥®æš´é£Ÿã€‚",
  "relationship": "äººé™…å…³ç³»å’Œè°ï¼Œå®¶åº­å’Œç¦ã€‚",
  "advice": "ä¿æŒç°çŠ¶ï¼Œç¨³æ‰ç¨³æ‰“ï¼Œé¿å…å†’è¿›ã€‚"
}
```

### äººç”Ÿé˜¶æ®µåˆ†æ

```http
POST /api/lifestages
Authorization: Bearer <token>
```

**è¯·æ±‚å‚æ•°**

| å­—æ®µå | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| name | string | æ˜¯ | å§“å |
| bazi | array | æ˜¯ | å…«å­—å››æŸ±æ•°ç»„ |
| shiErChangSheng | object | æ˜¯ | åäºŒé•¿ç”Ÿå›¾ |

**å“åº”ç¤ºä¾‹**

```json
{
  "name": "å¼ ä¸‰",
  "analysis": {
    "childhood": "ç«¥å¹´æ—¶æœŸå¾—åˆ°çˆ¶æ¯å…³çˆ±ï¼Œæ€§æ ¼æ¸©å’Œã€‚",
    "youth": "é’å¹´æ—¶æœŸå­¦ä¸šé¡ºåˆ©ï¼Œä½†æ„Ÿæƒ…æ³¢æŠ˜è¾ƒå¤šã€‚",
    "middle": "ä¸­å¹´æ—¶æœŸäº‹ä¸šå‘å±•å¹³ç¨³ï¼Œéœ€æ³¨æ„èº«ä½“å¥åº·ã€‚",
    "later": "æ™šå¹´ç”Ÿæ´»å®‰é€¸ï¼Œå­å­™å­é¡ºã€‚"
  }
}
```

## ğŸ“Š å·¥å…·æ¥å£

### å¥åº·æ£€æŸ¥

```http
GET /health
```

**å“åº”ç¤ºä¾‹**

```json
{
  "status": "healthy",
  "service": "auspire-bazi"
}
```

## ğŸ“ˆ é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰é”™è¯¯å“åº”éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "error": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

### å¸¸è§é”™è¯¯ç 

| HTTPçŠ¶æ€ç  | é”™è¯¯ç±»å‹ | æè¿° |
|------------|----------|------|
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | Unauthorized | æœªæˆæƒè®¿é—® |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

## ğŸ”§ è¯·æ±‚ç¤ºä¾‹

### ä½¿ç”¨ curl

```bash
# åŸºç¡€å…«å­—è®¡ç®—
curl -X POST http://localhost:8080/api/bazi \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "birthDate": "1990-03-15",
    "birthTime": "14:30"
  }'

# å–œç”¨ç¥è®¡ç®—
curl -X POST http://localhost:8080/api/xiyongshen \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "bazi": [...]  // å®Œæ•´çš„å…«å­—æ•°ç»„
  }'
```

### ä½¿ç”¨ JavaScript (fetch)

```javascript
// åŸºç¡€å…«å­—è®¡ç®—
async function calculateBazi() {
  const response = await fetch('/api/bazi', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      name: 'å¼ ä¸‰',
      birthDate: '1990-03-15',
      birthTime: '14:30'
    })
  });
  
  const data = await response.json();
  console.log(data);
}
```

### ä½¿ç”¨ Python (requests)

```python
import requests

# åŸºç¡€å…«å­—è®¡ç®—
response = requests.post('http://localhost:8080/api/bazi', json={
    'name': 'å¼ ä¸‰',
    'birthDate': '1990-03-15',
    'birthTime': '14:30'
});

data = response.json();
print(data);
```

## ğŸ”„ ç‰ˆæœ¬å†å²

### v1.0.0 (2023-09-07)

**æ–°å¢åŠŸèƒ½**
- åŸºç¡€å…«å­—å››æŸ±è®¡ç®—
- åç¥å…³ç³»åˆ†æ
- è—å¹²åˆ†æ
- çº³éŸ³äº”è¡Œè®¡ç®—
- åäºŒé•¿ç”Ÿåˆ†æ
- å–œç”¨ç¥è®¡ç®—
- å››æŸ±å…«å­—ç»¼åˆåˆ†æ
- ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ
- è¿åŠ¿åˆ†æåŠŸèƒ½
- äººç”Ÿé˜¶æ®µåˆ†æ

**æŠ€æœ¯æ”¹è¿›**
- æ¨¡å—åŒ–æœåŠ¡æ¶æ„
- RESTful API è®¾è®¡
- JWT è®¤è¯æœºåˆ¶
- Redis ä¼šè¯ç®¡ç†
- å“åº”å¼å‰ç«¯ç•Œé¢

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰æŠ€æœ¯é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤å›¢é˜Ÿæˆ–æŸ¥é˜…ç›¸å…³æ–‡æ¡£ã€‚

---
*æœ¬æ–‡æ¡£æœ€åæ›´æ–°: 2023-09-07*